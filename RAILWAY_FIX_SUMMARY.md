# üö® –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –ü–†–û–ë–õ–ï–ú–´ –° –°–£–ë–¢–ò–¢–†–ê–ú–ò –ù–ê RAILWAY

## –ü—Ä–æ–±–ª–µ–º–∞
–°—É–±—Ç–∏—Ç—Ä—ã –Ω–µ –≤—ã–∂–∏–≥–∞–ª–∏—Å—å –≤ –≤–∏–¥–µ–æ –Ω–∞ Railway API —Å–µ—Ä–≤–µ—Ä–µ, —Ö–æ—Ç—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –æ—Ç–ø—Ä–∞–≤–ª—è–ª –¥–∞–Ω–Ω—ã–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ.

## –ü—Ä–∏—á–∏–Ω–∞
–§—É–Ω–∫—Ü–∏—è `createASSContent` –æ–∂–∏–¥–∞–ª–∞ –¥–∞–Ω–Ω—ã–µ –≤ —Ñ–æ—Ä–º–∞—Ç–µ —Å–µ–≥–º–µ–Ω—Ç–æ–≤ `[{words: [{word, start, end}]}]`, –Ω–æ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –æ—Ç–ø—Ä–∞–≤–ª—è–ª –º–∞—Å—Å–∏–≤ —Å–ª–æ–≤ `[{word, start, end}]`.

## –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö –≤ server.js
```javascript
// –î–û–ë–ê–í–õ–ï–ù–û: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —Ñ–æ—Ä–º–∞—Ç–∞ –¥–∞–Ω–Ω—ã—Ö
if (segments && segments.length > 0 && segments[0].word && !segments[0].words) {
  console.log('üîÑ Converting word array to segments format');
  processedSegments = [{ words: segments }];
}
```

### 2. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω Dockerfile –¥–ª—è Railway
```dockerfile
# –ò–°–ü–†–ê–í–õ–ï–ù–û: –£–±—Ä–∞–Ω–∞ –ø—Ä–æ–±–ª–µ–º–Ω–∞—è –æ–ø—Ü–∏—è --wildcards –¥–ª—è BusyBox tar
RUN curl -L -o /tmp/ffmpeg.tar.xz https://johnvansickle.com/ffmpeg/releases/ffmpeg-release-amd64-static.tar.xz \
    && cd /tmp \
    && tar -xJf ffmpeg.tar.xz \
    && find . -name "ffmpeg" -type f -exec cp {} /usr/local/bin/ \; \
    && find . -name "ffprobe" -type f -exec cp {} /usr/local/bin/ \; \
    && chmod +x /usr/local/bin/ffmpeg /usr/local/bin/ffprobe \
    && rm -rf /tmp/ffmpeg* \
    && ffmpeg -version
```

### 3. –î–æ–±–∞–≤–ª–µ–Ω–æ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö transcript
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è ASS —Ñ–∞–π–ª–æ–≤
- –ü—Ä–æ–≤–µ—Ä–∫–∞ FFmpeg –∫–æ–º–∞–Ω–¥—ã —Å —Å—É–±—Ç–∏—Ç—Ä–∞–º–∏
- –ü–æ–¥—Å—á–µ—Ç –¥–∏–∞–ª–æ–≥–æ–≤ –≤ ASS —Ñ–∞–π–ª–µ

### 4. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π
```javascript
// –ò–°–ü–†–ê–í–õ–ï–ù–û: –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è assStats -> assFileStats
const assFileStats = await fs.stat(assPath);
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –õ–æ–∫–∞–ª—å–Ω—ã–π —Ç–µ—Å—Ç
```bash
node test_fix_format.js
# ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –†–ê–ë–û–¢–ê–ï–¢: –°—É–±—Ç–∏—Ç—Ä—ã —Å–æ–∑–¥–∞—é—Ç—Å—è!
# üí¨ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–∏–∞–ª–æ–≥–æ–≤: 3
```

### –¢–µ—Å—Ç Railway API
```bash
node test_railway.js
# –¢–µ—Å—Ç–∏—Ä—É–µ—Ç –ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª: health check -> —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏ -> –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
```

## –†–µ–∑—É–ª—å—Ç–∞—Ç
- ‚úÖ –§—É–Ω–∫—Ü–∏—è createASSContent —Ç–µ–ø–µ—Ä—å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –æ–±–∞ —Ñ–æ—Ä–º–∞—Ç–∞ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ ASS —Ñ–∞–π–ª—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Å –¥–∏–∞–ª–æ–≥–∞–º–∏
- ‚úÖ FFmpeg –ø–æ–ª—É—á–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ —Å—É–±—Ç–∏—Ç—Ä—ã –¥–ª—è –≤—ã–∂–∏–≥–∞–Ω–∏—è
- ‚úÖ Dockerfile —Å–æ–≤–º–µ—Å—Ç–∏–º —Å Alpine Linux –Ω–∞ Railway
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

## –î–µ–ø–ª–æ–π –Ω–∞ Railway
1. –ó–∞–∫–æ–º–º–∏—Ç–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
2. –ü—É—à–Ω—É—Ç—å –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
3. Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—Å–æ–±–µ—Ä–µ—Ç —Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–º Dockerfile
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π –æ —Å–æ–∑–¥–∞–Ω–∏–∏ ASS —Ñ–∞–π–ª–æ–≤

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã
–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –≤ –ª–æ–≥–∞—Ö Railway –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è:
```
üîÑ Converting word array to segments format
‚úÖ Using 1 segments for processing
üìù Processing 1 segments, first: X words
‚úÖ ASS files created: XXXX chars, XXX bytes
üí¨ Dialogue lines in ASS: X
üîß FFmpeg command: [–∫–æ–º–∞–Ω–¥–∞ —Å subtitles filter]
üéØ Subtitles filter: ‚úÖ INCLUDED
```